<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script>
        window.onload = function () {
            //获取需要的对象
            var year = document.getElementById("years");
            var month = document.getElementById("months");
            var input = document.getElementById("date-info");
            let calendar = document.getElementsByTagName("table")[0];
            var day_list = document.querySelectorAll("table td");
            var select = document.getElementsByTagName("select");
            var ThirstyOne_arr = [1,3,5,7,8,10,12];
            var Thirsty_arr = [4,6,9,10,11];
            //获取框里的年份月份
            var yearValue , monthValue , date;
            for(var s=0; s<select.length; s++){
                select[s].onclick = function(){
                    yearValue = parseInt(year.value);
                    monthValue = parseInt(month.value);
                    date = new Date(yearValue + "/" + monthValue);
                    //获取每月的1号星期数
                    let firstDay = date.getDay();
                    //当周日的时候getDay()=0,因此需要改为7
                    if(firstDay == 0) {
                        firstDay = 7;
                    }
                    console.log(firstDay);
                    //清空缓存
                    for(var j=0; j<day_list.length; j++){
                        day_list[j].innerHTML = "";
                    }
                    // 先判断是否是31天的月份
                    if(ThirstyOne_arr.indexOf(monthValue) > -1){

                        for(let i=firstDay-1; i<firstDay+30; i++){
                            day_list[i].innerHTML = i + 2 - firstDay + "";
                        }
                    } else if(Thirsty_arr.indexOf(monthValue) > -1){
                        for(let i=firstDay-1; i<firstDay+29; i++){
                            day_list[i].innerHTML = i + 2 - firstDay + "";
                        }
                    } else if(yearValue%4 == 0){
                        for(let i=firstDay-1; i<firstDay+28; i++){
                            day_list[i].innerHTML = i + 2 - firstDay + "";
                        }
                    } else {
                        for(let i=firstDay-1; i<firstDay+27; i++){
                            day_list[i].innerHTML = i + 2 - firstDay + "";
                        }
                    }
                }
            }
            //给日历表绑定事件
            calendar.onclick = function (event) {
                if(event.target.innerHTML){
                    input.value = yearValue + "年" + monthValue
                                  + "月" + event.target.innerHTML
                                  + "日";
                }
            }

        }
    </script>
    <style>
        #date-info {
            width: 200px;
            transform: translate(-50%);
            margin-left: 50%;
            text-align: center;
        }
        #calendar {
            margin-top: 30px;
            padding:20px;
            text-align: center;
            border:1px solid #000;
        }
        table {
            margin:20px auto;
            border:1px solid #000;
            border-collapse: collapse;
        }
        td,th {
            width: 50px;
            height: 30px;
            border:1px solid #000;
        }
        td:hover {
            cursor: pointer;
            text-decoration: underline;
        }
        tbody>tr:nth-child(odd){
            background-color: #1bc7fb;
        }

    </style>
</head>
<body>
    <div id="show-table">
        <input type="text" id="date-info">
    </div>
    <div id="calendar">
        <select name="" id="years">
            <option value="2015">2015</option>
            <option value="2016">2016</option>
            <option value="2017">2017</option>
            <option value="2018">2018</option>
            <option value="2019">2019</option>
            <option value="2020">2020</option>
        </select>年
        <select name="" id="months">
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
            <option value="7">7</option>
            <option value="8">8</option>
            <option value="9">9</option>
            <option value="10">10</option>
            <option value="11">11</option>
            <option value="12">12</option>
        </select>月
        <table>
            <tr>
                <th>Mon</th>
                <th>Tues</th>
                <th>Wed</th>
                <th>Thurs</th>
                <th>Fri</th>
                <th>Sat</th>
                <th>Sun</th>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
            <tr>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
            </tr>
        </table>
    </div>
</body>
</html>